!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={GAME_WIDTH:800,GAME_HEIGHT:600,DOM_PARENT:"main",TILE_WIDTH:70,TILE_HEIGHT:70,GRAVITY:20,MOVEMENT_VEL:210,JUMP_VEL:500,CLOUD_MOVE_OFFSET:1e3,CLOUD_MOVE_TIME:3e4,MAX_PARTICLES:250,PARTICLE_X_OFFSET:45,PARTICLE_Y_OFFSET:10,ELEM_GRAVITY:3,ITEM_FADE_TIME:1e3,ITEM_ACQUIRE_OFFSET:25,ITEM_DROP_VEL:-100,BLOCK_FADE_TIME:1e3,LEVEL_FADEIN_TIME:1e3,LEVEL_FADEOUT_TIME:500,PLAYER_BOUND_WIDTH:30,PLAYER_BOUND_HEIGHT:75,PLAYER_BOUND_H_OFFSET:10,FLOATING_TILES:[2,14,26,41,44,46,53,56,58,65,68,70,71,75,77,80,82,87,99,111,117,119,126,145],UPWARD_SLOPE_TILES:[29,32,34,42,63,105],DOWNWARD_SLOPE_TILES:[5,8,10,30,39,95],BACKGROUND_TILES:[1,6,13,18,19,21,25,31,33,37,40,45,52,57,64,69,76,81,149],GOAL_TILE:57}},{}],2:[function(a,b){var c=function(){var a=Array.prototype.slice.call(arguments);return a.unshift({}),Phaser.Utils.extend.apply(null,a)},d=function(a,b){a.powergem=b,a.element=b.element,a.hasElement=!0},e=function(a){a.powergem=null,a.hasElement=!1,a.elementWasDropped=!0},f=function(a){return!a.element},g=function(a,b){return a.group.element===b.element},h={style:{font:'18px "minecraftiaregular"',fill:"slategray",align:"center"}},i={air:{element:"air",frameName:"air.png",num:200,gravity:.1,lifespan:1e3,particleScale:{min:1.5,max:2},angularVel:{min:-20,max:20},speedX:{min:100,max:200},speedY:{min:-125,max:125}},water:{element:"water",frameName:"water.png",num:200,gravity:6,lifespan:1500,particleScale:{min:.5,max:1.3},angularVel:{min:-20,max:20},speedX:{min:100,max:250},speedY:{min:-150,max:150}},earth:{element:"earth",frameName:"earth.png",num:200,gravity:2,lifespan:2300,particleScale:{min:1.2,max:1.5},angularVel:{min:-50,max:50},speedX:{min:100,max:300},speedY:{min:-100,max:100}},fire:{element:"fire",frameName:"fire.png",num:200,gravity:-5,lifespan:1e3,particleScale:{min:1,max:1.5},angularVel:{min:800,max:1200},speedX:{min:100,max:200},speedY:{min:-100,max:100}}},j={air:{elemType:"powergem",props:{element:"air",acquire:d,drop:e,checkAcquirable:f},frameName:"gemYellow.png",body:{x:20,y:20,width:30,height:30}},water:{elemType:"powergem",props:{element:"water",acquire:d,drop:e,checkAcquirable:f},frameName:"gemBlue.png",body:{x:20,y:20,width:30,height:30}},earth:{elemType:"powergem",props:{element:"earth",acquire:d,drop:e,checkAcquirable:f},frameName:"gemGreen.png",body:{x:20,y:20,width:30,height:30}},fire:{elemType:"powergem",props:{element:"fire",acquire:d,drop:e,checkAcquirable:f},frameName:"gemRed.png",body:{x:20,y:20,width:30,height:30}}},k={goalStar:{frameName:"star.png",noGravity:!0,tween:[{x:0,y:-10,duration:800,easing:Phaser.Easing.Quadratic.InOut},{x:0,y:10,duration:800,easing:Phaser.Easing.Quadratic.InOut}],tweenLoop:!0}},l={air:{elemType:"powerblock",props:{element:"air",checkCollideParticle:g},frameId:54,body:{x:0,y:0,width:70,height:70}},water:{elemType:"powerblock",props:{element:"water",checkCollideParticle:g},frameId:90,body:{x:0,y:0,width:70,height:70}},earth:{elemType:"powerblock",props:{element:"earth",checkCollideParticle:g},frameId:97,body:{x:0,y:0,width:70,height:70}},fire:{elemType:"powerblock",props:{element:"fire",checkCollideParticle:g},frameId:66,body:{x:0,y:0,width:70,height:70}}};b.exports={mainmenu:{player:{x:675,y:343}},levels:{level1:{nextState:"level2",width:2100,height:840,background:"#d0f4f7",clouds:15,player:{x:150,y:580},goal:{x:1961,y:490},text:[c(h,{x:350,y:350,msg:"Hi! :D\nUse the arrow keys to move and jump about.\nTry to make it to the level exit!"}),c(h,{x:1e3,y:725,msg:'Grab a powergem with the "Z" key.\nThen use the spacebar to unleash your element!',style:{font:'18px "minecraftiaregular"',fill:"#2c2c2c",align:"center"}}),c(h,{x:1600,y:275,msg:"Use your power to remove obstacles.\nEach obstacle type matches one of your elements."})],items:[c(j.water,{x:1085,y:580})],backgroundItems:[c(k.goalStar,{x:1961,y:380})],blocks:[c(l.water,{x:1715,y:450}),c(l.water,{x:1715,y:350})],elements:[i.water]},level2:{width:2100,height:1050,background:"#d0f4f7",clouds:15,player:{x:150,y:780},goal:{x:1960,y:500},text:[c(h,{x:250,y:650,msg:"Keep going!"}),c(h,{x:1e3,y:300,msg:"There are 4 types\nof powergems, but you\ncan only carry one at a time!"}),c(h,{x:375,y:240,msg:'Use the "X" key to drop\nyour current powergem.\nThen, you can pick up a new one!'}),c(h,{x:1800,y:550,msg:"From here on out,\nyou're on your own. :)"})],items:[c(j.water,{x:485,y:920}),c(j.earth,{x:450,y:300})],backgroundItems:[c(k.goalStar,{x:1960,y:590})],blocks:[c(l.water,{x:815,y:850}),c(l.water,{x:815,y:750}),c(l.earth,{x:1415,y:650}),c(l.earth,{x:1415,y:550}),c(l.water,{x:600,y:300}),c(l.water,{x:600,y:200})],elements:[i.water,i.earth]}}}},{}],3:[function(a,b){function c(a,b){return function(c,d,e,f,g){if(this._mapData=d.getTiles(c.body.x,c.body.y,c.body.width,c.body.height,!0),0!==this._mapData.length)for(var h=0;h<this._mapData.length;h++){var i=this._mapData[h],j=0;a.indexOf(i.tile.index)>=0&&c.body.right<i.right?j=Math.max(0,i.right-c.body.right):b.indexOf(i.tile.index)>=0&&c.body.x>i.x&&(j=Math.max(0,c.body.x-i.x));var k=0===j||c.body.bottom>i.y+j;k&&this.separateTile(c.body,this._mapData[h])&&(f?f.call(g,c,this._mapData[h])&&(this._total++,e&&e.call(g,c,this._mapData[h])):(this._total++,e&&e.call(g,c,this._mapData[h])),j>0&&(c.body.y+=j,c.body.updateHulls()))}}}b.exports.createSlopedTilemapCollider=c},{}],4:[function(a){function b(){R.physics.collideSpriteVsTilemapLayer=O.createSlopedTilemapCollider(P.UPWARD_SLOPE_TILES,P.DOWNWARD_SLOPE_TILES),R.input.maxPointers=1,S.boot=function(){},S.boot.prototype={preload:function(){R.load.image("preloadbar","assets/images/preloadbar.png")},create:function(){R.state.start("preloader")}},R.state.add("boot",S.boot,!1),S.preloader=function(){},S.preloader.prototype={preload:function(){q=R.add.sprite(0,0,"preloadbar"),q.x=(P.GAME_WIDTH-q.width)/2,q.y=P.GAME_HEIGHT/2-q.height/2,R.load.setPreloadSprite(q),c()},create:function(){q.crop.width=q.width;var a=R.add.tween(q).to({alpha:0},800,Phaser.Easing.Linear.None,!0);a.onComplete.addOnce(function(){R.state.start("mainmenu")})}},R.state.add("preloader",S.preloader,!1),S.mainmenu=function(){},S.mainmenu.prototype={create:function(){R.level="mainmenu",F=R.add.audio("theme"),F.play("",0,.3,!0),s=R.add.sprite(0,0,"menubackground"),s.alpha=0,t=R.add.text(R.world.centerX,R.world.centerY-150,"ELEMENTAL ONE",{font:'45px "minecraftiaregular"',fill:"slategray",align:"center"}),t.anchor.setTo(.5,.5);var a=R.add.text(R.world.centerX,R.world.centerY+200,"press enter",{font:'25px "minecraftiaregular"',fill:"black",align:"center"});a.anchor.setTo(.5,.5),R.add.tween(a).to({alpha:0},500,Phaser.Easing.Linear.None,!0,0,1/0,!0),R.add.tween(s).to({alpha:1},2e3,Phaser.Easing.Quadratic.Out,!0),m(Q.mainmenu.player.x,Q.mainmenu.player.y),z.body.gravity.y=0,z.animations.play("walk"),z.alpha=0,R.add.tween(z).to({alpha:1},2e3,Phaser.Easing.Quadratic.Out,!0);var b=R.add.tween(z).to({x:z.x-80},1350,Phaser.Easing.Linear.None,!0,0,1/0,!0);b.onComplete.add(function(){z.scale.x*=-1});var c=R.input.keyboard.addKey(Phaser.Keyboard.ENTER);c.onDown.addOnce(function(){R.add.tween(z).to({alpha:0},2e3,Phaser.Easing.Linear.None,!0),R.add.tween(t).to({alpha:0},2e3,Phaser.Easing.Linear.None,!0);var a=R.add.tween(s).to({alpha:0},2e3,Phaser.Easing.Linear.None,!0);a.onComplete.addOnce(function(){R.state.start("level1")})})}},R.state.add("mainmenu",S.mainmenu,!1),S.Levels={},Object.keys(Q.levels).forEach(function(a){S.Levels[a]=function(){},S.Levels[a].prototype={create:function(){R.level=a,R.nextState=Q.levels[a].nextState,d()},update:o,render:p},R.state.add(a,S.Levels[a],!1)}),R.state.start("boot")}function c(){r||(R.load.image("menubackground","assets/images/menubackground.png"),R.load.image("occluder","assets/images/occluder.png"),R.load.tilemap("level1","assets/tilemaps/level1.json",null,Phaser.Tilemap.TILED_JSON),R.load.tilemap("level2","assets/tilemaps/level2.json",null,Phaser.Tilemap.TILED_JSON),R.load.tileset("tiles","assets/tilesets/tiles_spritesheet.png",P.TILE_WIDTH,P.TILE_HEIGHT),R.load.atlas("p1","assets/sprites/p1_spritesheet.png","assets/sprites/p1_spritesheet.json"),R.load.atlasXML("items","assets/sprites/items_spritesheet.png","assets/sprites/items_spritesheet.xml"),R.load.spritesheet("blocks","assets/tilesets/tiles_spritesheet.png",P.TILE_WIDTH,P.TILE_HEIGHT),R.load.atlasXML("particles","assets/sprites/particles.png","assets/sprites/particles.xml"),R.load.audio("theme",["assets/sounds/happy.mp3","assets/sounds/happy.ogg"],!0),R.load.audio("jumpsound","assets/sounds/jump.wav",!0),R.load.audio("pickupsound","assets/sounds/pickup.wav",!0),R.load.audio("airsound","assets/sounds/air.wav",!0),R.load.audio("watersound","assets/sounds/water.wav",!0),R.load.audio("earthsound","assets/sounds/earth.wav",!0),R.load.audio("firesound","assets/sounds/fire.wav",!0),r=!0)}function d(){R.stage.backgroundColor=Q.levels[R.level].background,e(),v=R.add.tilemap(R.level),w=R.add.tileset("tiles"),w.setCollisionRange(0,w.total-1,!0,!0,!0,!0),w.tiles.forEach(function(a){a.enableMaxOverlapCheck=!0}),P.FLOATING_TILES.forEach(function(a){var b=w.getTile(a);b.setCollision(!1,!1,!0,!1)}),P.UPWARD_SLOPE_TILES.forEach(function(a){var b=w.getTile(a);b.setCollision(!1,!1,!0,!1),b.enableMaxOverlapCheck=!1}),P.DOWNWARD_SLOPE_TILES.forEach(function(a){var b=w.getTile(a);b.setCollision(!1,!1,!0,!1),b.enableMaxOverlapCheck=!1}),P.BACKGROUND_TILES.forEach(function(a){w.setCollision(a,!1,!1,!1,!1)}),f(),y=R.add.tilemapLayer(0,0,P.GAME_WIDTH,P.GAME_HEIGHT,w,v,0),x=R.add.tilemapLayer(0,0,P.GAME_WIDTH,P.GAME_HEIGHT,w,v,1),x.resizeWorld(),g(),h(),i(),n(),m(),j(),l(),u=R.add.sprite(z.x,z.y,"occluder"),u.anchor.setTo(.5,.5),u.scale.setTo(10,10),R.add.tween(u).to({alpha:0},P.LEVEL_FADEIN_TIME,Phaser.Easing.Linear.None,!0),R.camera.follow(z,Phaser.Camera.FOLLOW_PLATFORMER),J=R.input.keyboard.createCursorKeys(),K=R.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),L=R.input.keyboard.addKey(Phaser.Keyboard.Z),M=R.input.keyboard.addKey(Phaser.Keyboard.X),H=!1}function e(){G||(["jumpsound","pickupsound"].forEach(function(a){T[a]=R.add.audio(a)}),["airsound","watersound","earthsound","firesound"].forEach(function(a){T[a]=R.add.audio(a,1,!0)}),G=!0)}function f(){Q.levels[R.level].clouds&&(B=R.add.group(),N.range(10).forEach(function(){var a=P.CLOUD_MOVE_OFFSET*R.rnd.realInRange(.8,1.2),b=B.create(R.rnd.integerInRange(0,Q.levels[R.level].width),R.rnd.integerInRange(0,Q.levels[R.level].height),"items");b.animations.add("cloud",[R.rnd.pick(["cloud1.png","cloud2.png","cloud3.png"])],1,!1,!1),b.animations.play("cloud"),R.add.tween(b).to({x:b.x-a},P.CLOUD_MOVE_TIME,Phaser.Easing.Linear.None).to({x:b.x-a-100},3e3,Phaser.Easing.Quadratic.Out).to({x:b.x-a},3e3,Phaser.Easing.Quadratic.In).to({x:b.x+a},P.CLOUD_MOVE_TIME,Phaser.Easing.Linear.None).to({x:b.x+a+100},3e3,Phaser.Easing.Quadratic.Out).to({x:b.x+a},3e3,Phaser.Easing.Quadratic.In).loop().start()}))}function g(){E=R.add.group(),k(Q.levels[R.level].blocks,E,"blocks")}function h(){D=R.add.group(),k(Q.levels[R.level].backgroundItems,D,"items")}function i(){Q.levels[R.level].text&&Q.levels[R.level].text.forEach(function(a){var b=R.add.text(a.x,a.y,a.msg,a.style);b.anchor.setTo(.5,.5)})}function j(){C=R.add.group(),k(Q.levels[R.level].items,C,"items")}function k(a,b,c){var d=function(a){var d=b.create(a.x,a.y,c,a.frameName||a.frameId);if(d.elemType=a.elemType,d.body.allowGravity=!a.noGravity,d.body.gravity.y=P.ELEM_GRAVITY,d.body.collideWorldBounds=!0,a.body&&(d.body.setSize(a.body.width||d.body.sourceWidth,a.body.height||d.body.sourceHeight,a.body.x||d.body.offset.x,a.body.y||d.body.offset.y),d.body.immovable=a.body.immovable||d.body.immovable,d.body.gravity.y=a.body.gravity||P.ELEM_GRAVITY),a.props)for(var e in a.props)a.props.hasOwnProperty(e)&&(d[e]=a.props[e]);if(a.tween){var f=R.add.tween(d);a.tween.forEach(function(a){f=f.to({x:d.x+a.x,y:d.y+a.y},a.duration,a.easing)}),a.tweenLoop&&f.loop(),f.start()}};a.forEach(d)}function l(){Q.levels[R.level].elements.forEach(function(a){var b=R.add.emitter(0,0,P.MAX_PARTICLES);b.element=a.element,b.makeParticles("particles",[a.frameName],a.num,!0,!0),b.gravity=a.gravity||b.gravity,b.lifespan=a.lifespan||b.lifespan,a.particleScale&&(b.minParticleScale=a.particleScale.min,b.maxParticleScale=a.particleScale.max),a.angularVel&&b.setRotation(a.angularVel.min,a.angularVel.max),a.speedX&&b.setXSpeed(a.speedX.min,a.speedX.max),a.speedY&&b.setYSpeed(a.speedY.min,a.speedY.max),b.forEach(function(a){a.kill()}),U[a.element]=b})}function m(a,b){a=a||Q.levels[R.level].player.x,b=b||Q.levels[R.level].player.y,z=R.add.sprite(a,b,"p1"),z.body.collideWorldBounds=!0,z.body.blockable=!0,z.body.gravity.y=P.GRAVITY,z.body.setSize(P.PLAYER_BOUND_WIDTH,P.PLAYER_BOUND_HEIGHT,0,P.PLAYER_BOUND_H_OFFSET),z.anchor.setTo(.5,.5),z.animations.add("stand",["p1_stand"],1,!1,!1),z.animations.add("use",["p1_use"],1,!1,!1),z.animations.add("duck",["p1_duck"],1,!1,!1),z.animations.add("hurt",["p1_hurt"],1,!1,!1),z.animations.add("jump",["p1_jump"],1,!1,!1),z.animations.add("front",["p1_front"],1,!1,!1),z.animations.add("walk",Phaser.Animation.generateFrameNames("p1_walk",1,11,"",2),15,!0,!1),z.animations.play("stand")}function n(){Q.levels[R.level].goal&&(A=R.add.sprite(Q.levels[R.level].goal.x,Q.levels[R.level].goal.y,"blocks",P.GOAL_TILE),A.alpha=0)}function o(){I&&(I=!1,R.state.start(R.nextState));var a=U[z.element]||null;R.physics.overlap(z,A,function(){if(!H){H=!0,u.x=z.x,u.y=z.y;var a=R.add.tween(u).to({alpha:1},P.LEVEL_FADEOUT_TIME,Phaser.Easing.Linear.None,!0);a.onComplete.addOnce(function(){I=!0})}}),R.physics.collide(z,x),R.physics.collide(z,E),R.physics.collide(C,x),R.physics.collide(E,x),R.physics.collide(E,E),a&&(R.physics.collide(a,x),R.physics.overlap(a,E,function(a,b){b.collideParticle&&b.collideParticle(a,b),b.isDisappearing=!0,b.lifespan=P.ITEM_FADE_TIME},function(a,b){return b.isDisappearing?!1:b.checkCollideParticle?b.checkCollideParticle(a,b):!1}),a.forEachAlive(function(b){b.alpha=b.lifespan/a.lifespan}),z.elementWasDropped&&0===a.countLiving()&&(z.element=null,z.elementWasDropped=!1)),z.body.touching.down?(z.body.velocity.x=0,z.airborne!==!1&&(z.animations.play("stand"),z.facing="idle",z.airborne=!1)):z.airborne=!0,J.left.isDown?(z.body.velocity.x=-P.MOVEMENT_VEL,"left"!==z.facing&&(z.airborne||z.animations.play("walk"),z.facing="left",z.flipped=!0)):J.right.isDown?(z.body.velocity.x=P.MOVEMENT_VEL,"right"!==z.facing&&(z.airborne||z.animations.play("walk"),z.facing="right",z.flipped=!1)):J.down.isDown?(z.body.velocity.x=0,"down"!==z.facing&&(z.airborne||z.animations.play("duck"),z.facing="down")):z.airborne||"idle"!==z.facing&&(z.animations.play("stand"),z.facing="idle"),J.up.isDown&&z.body.touching.down&&(z.body.velocity.y=-P.JUMP_VEL,z.animations.play("jump"),z.airborne=!0,T.jumpsound.play("",0,.3)),L.isDown&&R.physics.overlap(z,C,function(a,b){a.currentItem=b,b.acquire&&b.acquire(a,b),b.isBeingAcquired=!0,b.lifespan=P.ITEM_FADE_TIME,T.pickupsound.play("",.6)},function(a,b){return b.isBeingAcquired?!1:b.checkAcquirable?b.checkAcquirable(a,b):!1}),M.isDown&&z.currentItem&&z.currentItem.lifespan<=0&&(z.currentItem.revive(),z.currentItem.isBeingAcquired=!1,z.currentItem.alpha=1,z.currentItem.body.x=z.body.x,z.currentItem.body.y=z.body.y+P.ITEM_ACQUIRE_OFFSET,z.currentItem.body.velocity.setTo(0,P.ITEM_DROP_VEL),z.currentItem.drop&&z.currentItem.drop(z,z.currentItem),z.currentItem=null),C.forEachAlive(function(a){if(a.isBeingAcquired){var b=(P.ITEM_FADE_TIME-a.lifespan)/P.ITEM_FADE_TIME;a.alpha=-1*b*b+1,R.physics.moveToXY(a,z.body.x,z.body.y+P.ITEM_ACQUIRE_OFFSET,null,a.lifespan)}}),E.forEachAlive(function(a){a.isDisappearing&&(a.alpha=a.lifespan/P.BLOCK_FADE_TIME)}),a&&(z.hasElement&&K.isDown&&"idle"===z.facing&&!z.airborne?(z.isFiring||(z.animations.play("use"),z.flipped?(a.emitX=z.x-P.PARTICLE_X_OFFSET,a.emitY=z.y+P.PARTICLE_Y_OFFSET,a.flipped=!0):(a.emitX=z.x+P.PARTICLE_X_OFFSET,a.emitY=z.y+P.PARTICLE_Y_OFFSET,a.flipped=!1)),z.isFiring=!0,T[z.element+"sound"].isPlaying||T[z.element+"sound"].play(),a.emitParticle()):(z.isFiring&&"idle"===z.facing&&!z.airborne&&z.animations.play("stand"),z.isFiring=!1,z.element&&T[z.element+"sound"].isPlaying&&T[z.element+"sound"].stop())),z.scale.x=z.flipped?-1:1}function p(){}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=(a("./overrides"),a("./utils")),O=a("./extensions"),P=a("./config"),Q=a("./data"),R=new Phaser.Game(P.GAME_WIDTH,P.GAME_HEIGHT,Phaser.CANVAS,P.DOM_PARENT),S={},T={},U={};window.onload=b},{"./config":1,"./data":2,"./extensions":3,"./overrides":5,"./utils":6}],5:[function(){"undefined"!=typeof Phaser&&(Phaser.Physics.Arcade.prototype.separateTileX=function(a,b,c){return a.immovable||0===a.deltaX()||Phaser.Rectangle.intersects(a.hullX,b)===!1?!1:(this._overlap=0,this._maxOverlap=a.deltaAbsX()+this.OVERLAP_BIAS,a.deltaX()<0?(this._overlap=b.right-a.hullX.x,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.left===!1||b.tile.collideRight===!1?this._overlap=0:a.touching.left=!0):(this._overlap=a.hullX.right-b.x,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.right===!1||b.tile.collideLeft===!1?this._overlap=0:a.touching.right=!0),0!==this._overlap?(c&&(a.x=a.deltaX()<0?a.x+this._overlap:a.x-this._overlap,a.velocity.x=0===a.bounce.x?0:-a.velocity.x*a.bounce.x,a.updateHulls()),!0):!1)},Phaser.Physics.Arcade.prototype.separateTileY=function(a,b,c){return a.immovable||0===a.deltaY()||Phaser.Rectangle.intersects(a.hullY,b)===!1?!1:(this._overlap=0,this._maxOverlap=a.deltaAbsY()+this.OVERLAP_BIAS,a.deltaY()<0?(this._overlap=b.bottom-a.hullY.y,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.up===!1||b.tile.collideDown===!1?this._overlap=0:a.touching.up=!0):(this._overlap=a.hullY.bottom-b.y,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.down===!1||b.tile.collideUp===!1?this._overlap=0:a.touching.down=!0),0!==this._overlap?(c&&(a.y=a.deltaY()<0?a.y+this._overlap:a.y-this._overlap,a.velocity.y=0===a.bounce.y?0:-a.velocity.y*a.bounce.y,a.updateHulls()),!0):!1)},Phaser.Physics.Arcade.prototype.moveToXY=function(a,b,c,d,e){return"undefined"==typeof d&&(d=60),"undefined"==typeof e&&(e=0),this._angle=Math.atan2(c-a.body.y,b-a.body.x),e>0&&(d=this.distanceToXY(a,b,c)/(e/1e3)),a.body.velocity.x=Math.cos(this._angle)*d,a.body.velocity.y=Math.sin(this._angle)*d,this._angle},Phaser.Physics.Arcade.prototype.distanceToXY=function(a,b,c){return this._dx=a.body.x-b,this._dy=a.body.y-c,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},Phaser.Physics.Arcade.prototype.angleToXY=function(a,b,c){return this._dx=b-a.body.x,this._dy=c-a.body.y,Math.atan2(this._dy,this._dx)},Phaser.Particles.Arcade.Emitter.prototype.emitParticle=function(){var a=this.getFirstExists(!1);if(null!=a){if(this.width>1||this.height>1?a.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):a.reset(this.emitX,this.emitY),a.lifespan=this.lifespan,a.body.bounce.setTo(this.bounce.x,this.bounce.y),a.body.velocity.x=this.minParticleSpeed.x!=this.maxParticleSpeed.x?this.game.rnd.integerInRange(this.minParticleSpeed.x,this.maxParticleSpeed.x):this.minParticleSpeed.x,a.body.velocity.y=this.minParticleSpeed.y!=this.maxParticleSpeed.y?this.game.rnd.integerInRange(this.minParticleSpeed.y,this.maxParticleSpeed.y):this.minParticleSpeed.y,a.body.gravity.y=this.gravity,a.body.angularVelocity=this.minRotation!=this.maxRotation?this.game.rnd.integerInRange(this.minRotation,this.maxRotation):this.minRotation,1!==this.minParticleScale||1!==this.maxParticleScale){var b=this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale);a.scale.setTo(b,b)}this.flipped&&(a.body.velocity.x*=-1,a.body.angularVelocity*=-1,a.scale.x*=-1),a.body.drag.x=this.particleDrag.x,a.body.drag.y=this.particleDrag.y,a.body.angularDrag=this.angularDrag}},Phaser.Physics.Arcade.prototype.separateX=function(a,b){return a.immovable&&b.immovable?!1:(this._overlap=0,Phaser.Rectangle.intersects(a,b)&&(this._maxOverlap=a.deltaAbsX()+b.deltaAbsX()+this.OVERLAP_BIAS,0===a.deltaX()&&0===b.deltaX()?(a.embedded=!0,b.embedded=!0):a.deltaX()>b.deltaX()?(this._overlap=a.x+a.width-b.x,this._overlap>this._maxOverlap||a.allowCollision.right===!1||b.allowCollision.left===!1?this._overlap=0:(a.touching.right=!0,b.touching.left=!0)):a.deltaX()<b.deltaX()&&(this._overlap=a.x-b.width-b.x,-this._overlap>this._maxOverlap||a.allowCollision.left===!1||b.allowCollision.right===!1?this._overlap=0:(a.touching.left=!0,b.touching.right=!0)),0!==this._overlap)?(a.overlapX=this._overlap,b.overlapX=this._overlap,a.customSeparateX||b.customSeparateX?!0:(this._velocity1=a.velocity.x,this._velocity2=b.velocity.x,a.immovable||b.immovable?a.immovable?b.immovable||(b.x+=this._overlap,b.velocity.x=this._velocity1-this._velocity2*b.bounce.x):(a.x=a.x-this._overlap,a.velocity.x=this._velocity2-this._velocity1*a.bounce.x):a.blockable||b.blockable?a.blockable?(a.x=a.x-this._overlap,a.velocity.x=this._velocity2-this._velocity1*a.bounce.x):b.blockable&&(b.x+=this._overlap,b.velocity.x=this._velocity1-this._velocity2*b.bounce.x):(this._overlap*=.5,a.x=a.x-this._overlap,b.x+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*b.mass/a.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*a.mass/b.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,a.velocity.x=this._average+this._newVelocity1*a.bounce.x,b.velocity.x=this._average+this._newVelocity2*b.bounce.x),a.updateHulls(),b.updateHulls(),!0)):!1)},Phaser.Physics.Arcade.prototype.separateY=function(a,b){return a.immovable&&b.immovable?!1:(this._overlap=0,Phaser.Rectangle.intersects(a,b)&&(this._maxOverlap=a.deltaAbsY()+b.deltaAbsY()+this.OVERLAP_BIAS,0===a.deltaY()&&0===b.deltaY()?(a.embedded=!0,b.embedded=!0):a.deltaY()>b.deltaY()?(this._overlap=a.y+a.height-b.y,this._overlap>this._maxOverlap||a.allowCollision.down===!1||b.allowCollision.up===!1?this._overlap=0:(a.touching.down=!0,b.touching.up=!0)):a.deltaY()<b.deltaY()&&(this._overlap=a.y-b.height-b.y,-this._overlap>this._maxOverlap||a.allowCollision.up===!1||b.allowCollision.down===!1?this._overlap=0:(a.touching.up=!0,b.touching.down=!0)),0!==this._overlap)?(a.overlapY=this._overlap,b.overlapY=this._overlap,a.customSeparateY||b.customSeparateY?!0:(this._velocity1=a.velocity.y,this._velocity2=b.velocity.y,a.immovable||b.immovable?a.immovable?b.immovable||(b.y+=this._overlap,b.velocity.y=this._velocity1-this._velocity2*b.bounce.y,a.sprite.active&&a.moves&&a.deltaY()<b.deltaY()&&(b.x+=a.x-a.lastX)):(a.y=a.y-this._overlap,a.velocity.y=this._velocity2-this._velocity1*a.bounce.y,b.active&&b.moves&&a.deltaY()>b.deltaY()&&(a.x+=b.x-b.lastX)):a.blockable||b.blockable?a.blockable?(a.y=a.y-this._overlap,a.velocity.y=this._velocity2-this._velocity1*a.bounce.y,b.active&&b.moves&&a.deltaY()>b.deltaY()&&(a.x+=b.x-b.lastX)):b.blockable&&(b.y+=this._overlap,b.velocity.y=this._velocity1-this._velocity2*b.bounce.y,a.sprite.active&&a.moves&&a.deltaY()<b.deltaY()&&(b.x+=a.x-a.lastX)):(this._overlap*=.5,a.y=a.y-this._overlap,b.y+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*b.mass/a.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*a.mass/b.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,a.velocity.y=this._average+this._newVelocity1*a.bounce.y,b.velocity.y=this._average+this._newVelocity2*b.bounce.y),a.updateHulls(),b.updateHulls(),!0)):!1)})},{}],6:[function(a,b){b.exports={range:function(){if(!arguments.length)return[];var a,b,c;1==arguments.length?(a=0,b=arguments[0],c=1):(a=arguments[0],b=arguments[1],c=arguments[2]||1);for(var d=[],e=a;b>e;e+=c)d.push(e);return d}}},{}]},{},[4]);