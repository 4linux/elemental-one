!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={GAME_WIDTH:800,GAME_HEIGHT:600,DOM_PARENT:"main",TILE_WIDTH:70,TILE_HEIGHT:70,GRAVITY:20,MOVEMENT_VEL:210,JUMP_VEL:500,CLOUD_MOVE_OFFSET:1e3,CLOUD_MOVE_TIME:3e4,MAX_PARTICLES:250,PARTICLE_X_OFFSET:45,PARTICLE_Y_OFFSET:10,ELEM_GRAVITY:3,ITEM_FADE_TIME:1e3,ITEM_ACQUIRE_OFFSET:25,ITEM_DROP_VEL:-100,BLOCK_FADE_TIME:1e3,LEVEL_FADEIN_TIME:1e3,LEVEL_FADEOUT_TIME:500,PLAYER_BOUND_WIDTH:30,PLAYER_BOUND_HEIGHT:75,PLAYER_BOUND_H_OFFSET:10,FLOATING_TILES:[2,14,26,41,44,46,53,56,58,65,68,70,71,75,77,80,82,87,99,111,117,119,126,145],UPWARD_SLOPE_TILES:[29,32,34,42,63,105],DOWNWARD_SLOPE_TILES:[5,8,10,30,39,95],BACKGROUND_TILES:[1,6,13,18,19,21,25,31,33,37,40,45,52,57,64,69,76,81,149],GOAL_TILE:57}},{}],2:[function(a,b){var c=function(){var a=Array.prototype.slice.call(arguments);return a.unshift({}),Phaser.Utils.extend.apply(null,a)},d=function(a,b){a.powergem=b,a.element=b.element,a.hasElement=!0},e=function(a){a.powergem=null,a.hasElement=!1,a.elementWasDropped=!0},f=function(a){return!a.element},g=function(a,b){return a.group.element===b.element},h={style:{font:'18px "minecraftiaregular"',fill:"slategray",align:"center"}},i={air:{element:"air",frameName:"air.png",num:200,gravity:.1,lifespan:1e3,particleScale:{min:1.5,max:2},angularVel:{min:-20,max:20},speedX:{min:100,max:200},speedY:{min:-125,max:125}},water:{element:"water",frameName:"water.png",num:200,gravity:6,lifespan:1500,particleScale:{min:.5,max:1.3},angularVel:{min:-20,max:20},speedX:{min:100,max:250},speedY:{min:-150,max:150}},earth:{element:"earth",frameName:"earth.png",num:200,gravity:2,lifespan:2300,particleScale:{min:1.2,max:1.5},angularVel:{min:-50,max:50},speedX:{min:100,max:300},speedY:{min:-100,max:100}},fire:{element:"fire",frameName:"fire.png",num:200,gravity:-5,lifespan:1e3,particleScale:{min:1,max:1.5},angularVel:{min:800,max:1200},speedX:{min:100,max:200},speedY:{min:-100,max:100}}},j={air:{elemType:"powergem",props:{element:"air",acquire:d,drop:e,checkAcquirable:f},frameName:"gemYellow.png",body:{x:20,y:20,width:30,height:30}},water:{elemType:"powergem",props:{element:"water",acquire:d,drop:e,checkAcquirable:f},frameName:"gemBlue.png",body:{x:20,y:20,width:30,height:30}},earth:{elemType:"powergem",props:{element:"earth",acquire:d,drop:e,checkAcquirable:f},frameName:"gemGreen.png",body:{x:20,y:20,width:30,height:30}},fire:{elemType:"powergem",props:{element:"fire",acquire:d,drop:e,checkAcquirable:f},frameName:"gemRed.png",body:{x:20,y:20,width:30,height:30}}},k={goalStar:{frameName:"star.png",noGravity:!0,tween:[{x:0,y:-10,duration:800,easing:Phaser.Easing.Quadratic.InOut},{x:0,y:10,duration:800,easing:Phaser.Easing.Quadratic.InOut}],tweenLoop:!0}},l={air:{elemType:"powerblock",props:{element:"air",checkCollideParticle:g},frameId:54,body:{x:0,y:0,width:70,height:70}},water:{elemType:"powerblock",props:{element:"water",checkCollideParticle:g},frameId:90,body:{x:0,y:0,width:70,height:70}},earth:{elemType:"powerblock",props:{element:"earth",checkCollideParticle:g},frameId:97,body:{x:0,y:0,width:70,height:70}},fire:{elemType:"powerblock",props:{element:"fire",checkCollideParticle:g},frameId:66,body:{x:0,y:0,width:70,height:70}}};b.exports={mainmenu:{player:{x:675,y:343}},levels:{level1:{nextState:"level2",width:2100,height:840,background:"#d0f4f7",clouds:15,player:{x:150,y:580},goal:{x:1961,y:490},text:[c(h,{x:350,y:350,msg:"Hi! :D\nUse the arrow keys to move and jump about.\nTry to make it to the level exit!"}),c(h,{x:1e3,y:725,msg:'Grab a powergem with the "Z" key.\nThen use the spacebar to unleash your element!',style:{font:'18px "minecraftiaregular"',fill:"#2c2c2c",align:"center"}}),c(h,{x:1600,y:275,msg:"Use your power to remove obstacles.\nEach obstacle type matches one of your elements."})],items:[c(j.water,{x:1085,y:580})],backgroundItems:[c(k.goalStar,{x:1961,y:380})],blocks:[c(l.water,{x:1715,y:450}),c(l.water,{x:1715,y:350})],elements:[i.water]},level2:{nextState:"level3",width:2100,height:1050,background:"#d0f4f7",clouds:15,player:{x:150,y:780},goal:{x:1961,y:700},text:[c(h,{x:250,y:650,msg:"Keep going!"}),c(h,{x:1e3,y:300,msg:"There are 4 types\nof powergems, but you\ncan only carry one at a time!"}),c(h,{x:375,y:240,msg:'Use the "X" key to drop\nyour current powergem.\nThen, you can pick up a new one!'}),c(h,{x:1800,y:550,msg:"From here on out,\nyou're on your own. :)"})],items:[c(j.water,{x:485,y:920}),c(j.earth,{x:450,y:300})],backgroundItems:[c(k.goalStar,{x:1960,y:590})],blocks:[c(l.water,{x:815,y:850}),c(l.water,{x:815,y:750}),c(l.earth,{x:1415,y:650}),c(l.earth,{x:1415,y:550}),c(l.water,{x:600,y:300}),c(l.water,{x:600,y:200})],elements:[i.water,i.earth]},level3:{nextState:null,width:3850,height:2170,background:"#d0f4f7",clouds:35,player:{x:150,y:1740},goal:{x:1890,y:420,width:140},items:[c(j.water,{x:705,y:1980}),c(j.earth,{x:3780,y:1840}),c(j.fire,{x:3745,y:610})],backgroundItems:[c(k.goalStar,{x:1960,y:313}),c(k.goalStar,{x:1890,y:313})],blocks:[c(l.water,{x:2615,y:1930}),c(l.water,{x:2615,y:1830}),c(l.earth,{x:1475,y:1700}),c(l.earth,{x:1475,y:1600}),c(l.earth,{x:3550,y:550}),c(l.earth,{x:3550,y:450}),c(l.fire,{x:1800,y:1400}),c(l.fire,{x:1800,y:1300})],elements:[i.water,i.earth,i.fire]}}}},{}],3:[function(a,b){function c(a,b){return function(c,d,e,f,g){if(this._mapData=d.getTiles(c.body.x,c.body.y,c.body.width,c.body.height,!0),0!==this._mapData.length)for(var h=0;h<this._mapData.length;h++){var i=this._mapData[h],j=0;a.indexOf(i.tile.index)>=0&&c.body.right<i.right?j=Math.max(0,i.right-c.body.right):b.indexOf(i.tile.index)>=0&&c.body.x>i.x&&(j=Math.max(0,c.body.x-i.x));var k=0===j||c.body.bottom>i.y+j;k&&this.separateTile(c.body,this._mapData[h])&&(f?f.call(g,c,this._mapData[h])&&(this._total++,e&&e.call(g,c,this._mapData[h])):(this._total++,e&&e.call(g,c,this._mapData[h])),j>0&&(c.body.y+=j,c.body.updateHulls()))}}}b.exports.createSlopedTilemapCollider=c},{}],4:[function(a){function b(){S.physics.collideSpriteVsTilemapLayer=P.createSlopedTilemapCollider(Q.UPWARD_SLOPE_TILES,Q.DOWNWARD_SLOPE_TILES),S.input.maxPointers=1,T.boot=function(){},T.boot.prototype={preload:function(){S.load.image("preloadbar","assets/images/preloadbar.png")},create:function(){S.state.start("preloader")}},S.state.add("boot",T.boot,!1),T.preloader=function(){},T.preloader.prototype={preload:function(){q=S.add.sprite(0,0,"preloadbar"),q.x=(Q.GAME_WIDTH-q.width)/2,q.y=Q.GAME_HEIGHT/2-q.height/2,S.load.setPreloadSprite(q),c()},create:function(){q.crop.width=q.width;var a=S.add.tween(q).to({alpha:0},800,Phaser.Easing.Linear.None,!0);a.onComplete.addOnce(function(){S.state.start("mainmenu")})}},S.state.add("preloader",T.preloader,!1),T.mainmenu=function(){},T.mainmenu.prototype={create:function(){S.level="mainmenu",G=S.add.audio("theme"),G.play("",0,.3,!0),s=S.add.sprite(0,0,"menubackground"),s.alpha=0,t=S.add.text(S.world.centerX,S.world.centerY-150,"ELEMENTAL ONE",{font:'45px "minecraftiaregular"',fill:"slategray",align:"center"}),t.anchor.setTo(.5,.5);var a=S.add.text(S.world.centerX,S.world.centerY+200,"press enter",{font:'25px "minecraftiaregular"',fill:"black",align:"center"});a.anchor.setTo(.5,.5),S.add.tween(a).to({alpha:0},500,Phaser.Easing.Linear.None,!0,0,1/0,!0),S.add.tween(s).to({alpha:1},2e3,Phaser.Easing.Quadratic.Out,!0),m(R.mainmenu.player.x,R.mainmenu.player.y),A.body.gravity.y=0,A.animations.play("walk"),A.alpha=0,S.add.tween(A).to({alpha:1},2e3,Phaser.Easing.Quadratic.Out,!0);var b=S.add.tween(A).to({x:A.x-80},1350,Phaser.Easing.Linear.None,!0,0,1/0,!0);b.onComplete.add(function(){A.scale.x*=-1});var c=S.input.keyboard.addKey(Phaser.Keyboard.ENTER);c.onDown.addOnce(function(){S.add.tween(A).to({alpha:0},2e3,Phaser.Easing.Linear.None,!0),S.add.tween(t).to({alpha:0},2e3,Phaser.Easing.Linear.None,!0);var a=S.add.tween(s).to({alpha:0},2e3,Phaser.Easing.Linear.None,!0);a.onComplete.addOnce(function(){S.state.start("level1")})})}},S.state.add("mainmenu",T.mainmenu,!1),T.Levels={},Object.keys(R.levels).forEach(function(a){T.Levels[a]=function(){},T.Levels[a].prototype={create:function(){S.level=a,S.nextState=R.levels[a].nextState,d()},update:o,render:p},S.state.add(a,T.Levels[a],!1)}),S.state.start("boot")}function c(){r||(S.load.image("menubackground","assets/images/menubackground.png"),S.load.image("occluder","assets/images/occluder.png"),S.load.tilemap("level1","assets/tilemaps/level1.json",null,Phaser.Tilemap.TILED_JSON),S.load.tilemap("level2","assets/tilemaps/level2.json",null,Phaser.Tilemap.TILED_JSON),S.load.tilemap("level3","assets/tilemaps/level3.json",null,Phaser.Tilemap.TILED_JSON),S.load.tileset("tiles","assets/tilesets/tiles_spritesheet.png",Q.TILE_WIDTH,Q.TILE_HEIGHT),S.load.atlas("p1","assets/sprites/p1_spritesheet.png","assets/sprites/p1_spritesheet.json"),S.load.atlasXML("items","assets/sprites/items_spritesheet.png","assets/sprites/items_spritesheet.xml"),S.load.spritesheet("blocks","assets/tilesets/tiles_spritesheet.png",Q.TILE_WIDTH,Q.TILE_HEIGHT),S.load.atlasXML("particles","assets/sprites/particles.png","assets/sprites/particles.xml"),S.load.audio("theme",["assets/sounds/happy.mp3","assets/sounds/happy.ogg"],!0),S.load.audio("jumpsound","assets/sounds/jump.wav",!0),S.load.audio("pickupsound","assets/sounds/pickup.wav",!0),S.load.audio("airsound","assets/sounds/air.wav",!0),S.load.audio("watersound","assets/sounds/water.wav",!0),S.load.audio("earthsound","assets/sounds/earth.wav",!0),S.load.audio("firesound","assets/sounds/fire.wav",!0),r=!0)}function d(){S.stage.backgroundColor=R.levels[S.level].background,e(),v=S.add.tilemap(S.level),w=S.add.tileset("tiles"),w.setCollisionRange(0,w.total-1,!0,!0,!0,!0),w.tiles.forEach(function(a){a.enableMaxOverlapCheck=!0}),Q.FLOATING_TILES.forEach(function(a){var b=w.getTile(a);b.setCollision(!1,!1,!0,!1)}),Q.UPWARD_SLOPE_TILES.forEach(function(a){var b=w.getTile(a);b.setCollision(!1,!1,!0,!1),b.enableMaxOverlapCheck=!1}),Q.DOWNWARD_SLOPE_TILES.forEach(function(a){var b=w.getTile(a);b.setCollision(!1,!1,!0,!1),b.enableMaxOverlapCheck=!1}),Q.BACKGROUND_TILES.forEach(function(a){w.setCollision(a,!1,!1,!1,!1)}),f(),z=S.add.tilemapLayer(0,0,Q.GAME_WIDTH,Q.GAME_HEIGHT,w,v,0),y=S.add.tilemapLayer(0,0,Q.GAME_WIDTH,Q.GAME_HEIGHT,w,v,1),x=S.add.tilemapLayer(0,0,Q.GAME_WIDTH,Q.GAME_HEIGHT,w,v,2),x.resizeWorld(),g(),h(),i(),n(),m(),j(),l(),u=S.add.sprite(A.x,A.y,"occluder"),u.anchor.setTo(.5,.5),u.scale.setTo(10,10),S.add.tween(u).to({alpha:0},Q.LEVEL_FADEIN_TIME,Phaser.Easing.Linear.None,!0),S.camera.follow(A,Phaser.Camera.FOLLOW_PLATFORMER),K=S.input.keyboard.createCursorKeys(),L=S.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),M=S.input.keyboard.addKey(Phaser.Keyboard.Z),N=S.input.keyboard.addKey(Phaser.Keyboard.X),I=!1}function e(){H||(["jumpsound","pickupsound"].forEach(function(a){U[a]=S.add.audio(a)}),["airsound","watersound","earthsound","firesound"].forEach(function(a){U[a]=S.add.audio(a,1,!0)}),H=!0)}function f(){R.levels[S.level].clouds&&(C=S.add.group(),O.range(10).forEach(function(){var a=Q.CLOUD_MOVE_OFFSET*S.rnd.realInRange(.8,1.2),b=C.create(S.rnd.integerInRange(0,R.levels[S.level].width),S.rnd.integerInRange(0,R.levels[S.level].height),"items");b.animations.add("cloud",[S.rnd.pick(["cloud1.png","cloud2.png","cloud3.png"])],1,!1,!1),b.animations.play("cloud"),S.add.tween(b).to({x:b.x-a},Q.CLOUD_MOVE_TIME,Phaser.Easing.Linear.None).to({x:b.x-a-100},3e3,Phaser.Easing.Quadratic.Out).to({x:b.x-a},3e3,Phaser.Easing.Quadratic.In).to({x:b.x+a},Q.CLOUD_MOVE_TIME,Phaser.Easing.Linear.None).to({x:b.x+a+100},3e3,Phaser.Easing.Quadratic.Out).to({x:b.x+a},3e3,Phaser.Easing.Quadratic.In).loop().start()}))}function g(){F=S.add.group(),k(R.levels[S.level].blocks,F,"blocks")}function h(){E=S.add.group(),k(R.levels[S.level].backgroundItems,E,"items")}function i(){R.levels[S.level].text&&R.levels[S.level].text.forEach(function(a){var b=S.add.text(a.x,a.y,a.msg,a.style);b.anchor.setTo(.5,.5)})}function j(){D=S.add.group(),k(R.levels[S.level].items,D,"items")}function k(a,b,c){var d=function(a){var d=b.create(a.x,a.y,c,a.frameName||a.frameId);if(d.elemType=a.elemType,d.body.allowGravity=!a.noGravity,d.body.gravity.y=Q.ELEM_GRAVITY,d.body.collideWorldBounds=!0,a.body&&(d.body.setSize(a.body.width||d.body.sourceWidth,a.body.height||d.body.sourceHeight,a.body.x||d.body.offset.x,a.body.y||d.body.offset.y),d.body.immovable=a.body.immovable||d.body.immovable,d.body.gravity.y=a.body.gravity||Q.ELEM_GRAVITY),a.props)for(var e in a.props)a.props.hasOwnProperty(e)&&(d[e]=a.props[e]);if(a.tween){var f=S.add.tween(d);a.tween.forEach(function(a){f=f.to({x:d.x+a.x,y:d.y+a.y},a.duration,a.easing)}),a.tweenLoop&&f.loop(),f.start()}};a.forEach(d)}function l(){R.levels[S.level].elements.forEach(function(a){var b=S.add.emitter(0,0,Q.MAX_PARTICLES);b.element=a.element,b.makeParticles("particles",[a.frameName],a.num,!0,!0),b.gravity=a.gravity||b.gravity,b.lifespan=a.lifespan||b.lifespan,a.particleScale&&(b.minParticleScale=a.particleScale.min,b.maxParticleScale=a.particleScale.max),a.angularVel&&b.setRotation(a.angularVel.min,a.angularVel.max),a.speedX&&b.setXSpeed(a.speedX.min,a.speedX.max),a.speedY&&b.setYSpeed(a.speedY.min,a.speedY.max),b.forEach(function(a){a.kill()}),V[a.element]=b})}function m(a,b){a=a||R.levels[S.level].player.x,b=b||R.levels[S.level].player.y,A=S.add.sprite(a,b,"p1"),A.body.collideWorldBounds=!0,A.body.blockable=!0,A.body.gravity.y=Q.GRAVITY,A.body.setSize(Q.PLAYER_BOUND_WIDTH,Q.PLAYER_BOUND_HEIGHT,0,Q.PLAYER_BOUND_H_OFFSET),A.anchor.setTo(.5,.5),A.animations.add("stand",["p1_stand"],1,!1,!1),A.animations.add("use",["p1_use"],1,!1,!1),A.animations.add("duck",["p1_duck"],1,!1,!1),A.animations.add("hurt",["p1_hurt"],1,!1,!1),A.animations.add("jump",["p1_jump"],1,!1,!1),A.animations.add("front",["p1_front"],1,!1,!1),A.animations.add("walk",Phaser.Animation.generateFrameNames("p1_walk",1,11,"",2),15,!0,!1),A.animations.play("stand")}function n(){if(R.levels[S.level].goal){var a=R.levels[S.level].goal;B=S.add.sprite(a.x,a.y,"blocks",Q.GOAL_TILE),a.width&&(B.width=a.width),B.alpha=0}}function o(){J&&(J=!1,S.state.start(S.nextState));var a=V[A.element]||null;S.physics.overlap(A,B,function(){if(!I){I=!0,u.x=A.x,u.y=A.y;var a=S.add.tween(u).to({alpha:1},Q.LEVEL_FADEOUT_TIME,Phaser.Easing.Linear.None,!0);a.onComplete.addOnce(function(){J=!0})}}),S.physics.collide(A,x),S.physics.collide(A,F),S.physics.collide(D,x),S.physics.collide(F,x),S.physics.collide(F,F),a&&(S.physics.collide(a,x),S.physics.overlap(a,F,function(a,b){b.collideParticle&&b.collideParticle(a,b),b.isDisappearing=!0,b.lifespan=Q.ITEM_FADE_TIME},function(a,b){return b.isDisappearing?!1:b.checkCollideParticle?b.checkCollideParticle(a,b):!1}),a.forEachAlive(function(b){b.alpha=b.lifespan/a.lifespan}),A.elementWasDropped&&0===a.countLiving()&&(A.element=null,A.elementWasDropped=!1)),A.body.touching.down?(A.body.velocity.x=0,A.airborne!==!1&&(A.animations.play("stand"),A.facing="idle",A.airborne=!1)):A.airborne=!0,K.left.isDown?(A.body.velocity.x=-Q.MOVEMENT_VEL,"left"!==A.facing&&(A.airborne||A.animations.play("walk"),A.facing="left",A.flipped=!0)):K.right.isDown?(A.body.velocity.x=Q.MOVEMENT_VEL,"right"!==A.facing&&(A.airborne||A.animations.play("walk"),A.facing="right",A.flipped=!1)):K.down.isDown?(A.body.velocity.x=0,"down"!==A.facing&&(A.airborne||A.animations.play("duck"),A.facing="down")):A.airborne||"idle"!==A.facing&&(A.animations.play("stand"),A.facing="idle"),K.up.isDown&&A.body.touching.down&&(A.body.velocity.y=-Q.JUMP_VEL,A.animations.play("jump"),A.airborne=!0,U.jumpsound.play("",0,.3)),M.isDown&&S.physics.overlap(A,D,function(a,b){a.currentItem=b,b.acquire&&b.acquire(a,b),b.isBeingAcquired=!0,b.lifespan=Q.ITEM_FADE_TIME,U.pickupsound.play("",.6)},function(a,b){return b.isBeingAcquired?!1:b.checkAcquirable?b.checkAcquirable(a,b):!1}),N.isDown&&A.currentItem&&A.currentItem.lifespan<=0&&(A.currentItem.revive(),A.currentItem.isBeingAcquired=!1,A.currentItem.alpha=1,A.currentItem.body.x=A.body.x,A.currentItem.body.y=A.body.y+Q.ITEM_ACQUIRE_OFFSET,A.currentItem.body.velocity.setTo(0,Q.ITEM_DROP_VEL),A.currentItem.drop&&A.currentItem.drop(A,A.currentItem),A.currentItem=null),D.forEachAlive(function(a){if(a.isBeingAcquired){var b=(Q.ITEM_FADE_TIME-a.lifespan)/Q.ITEM_FADE_TIME;a.alpha=-1*b*b+1,S.physics.moveToXY(a,A.body.x,A.body.y+Q.ITEM_ACQUIRE_OFFSET,null,a.lifespan)}}),F.forEachAlive(function(a){a.isDisappearing&&(a.alpha=a.lifespan/Q.BLOCK_FADE_TIME)}),a&&(A.hasElement&&L.isDown&&"idle"===A.facing&&!A.airborne?(A.isFiring||(A.animations.play("use"),A.flipped?(a.emitX=A.x-Q.PARTICLE_X_OFFSET,a.emitY=A.y+Q.PARTICLE_Y_OFFSET,a.flipped=!0):(a.emitX=A.x+Q.PARTICLE_X_OFFSET,a.emitY=A.y+Q.PARTICLE_Y_OFFSET,a.flipped=!1)),A.isFiring=!0,U[A.element+"sound"].isPlaying||U[A.element+"sound"].play(),a.emitParticle()):(A.isFiring&&"idle"===A.facing&&!A.airborne&&A.animations.play("stand"),A.isFiring=!1,A.element&&U[A.element+"sound"].isPlaying&&U[A.element+"sound"].stop())),A.scale.x=A.flipped?-1:1}function p(){}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=(a("./overrides"),a("./utils")),P=a("./extensions"),Q=a("./config"),R=a("./data"),S=new Phaser.Game(Q.GAME_WIDTH,Q.GAME_HEIGHT,Phaser.CANVAS,Q.DOM_PARENT),T={},U={},V={};window.onload=b},{"./config":1,"./data":2,"./extensions":3,"./overrides":5,"./utils":6}],5:[function(){"undefined"!=typeof Phaser&&(Phaser.Physics.Arcade.prototype.separateTileX=function(a,b,c){return a.immovable||0===a.deltaX()||Phaser.Rectangle.intersects(a.hullX,b)===!1?!1:(this._overlap=0,this._maxOverlap=a.deltaAbsX()+this.OVERLAP_BIAS,a.deltaX()<0?(this._overlap=b.right-a.hullX.x,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.left===!1||b.tile.collideRight===!1?this._overlap=0:a.touching.left=!0):(this._overlap=a.hullX.right-b.x,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.right===!1||b.tile.collideLeft===!1?this._overlap=0:a.touching.right=!0),0!==this._overlap?(c&&(a.x=a.deltaX()<0?a.x+this._overlap:a.x-this._overlap,a.velocity.x=0===a.bounce.x?0:-a.velocity.x*a.bounce.x,a.updateHulls()),!0):!1)},Phaser.Physics.Arcade.prototype.separateTileY=function(a,b,c){return a.immovable||0===a.deltaY()||Phaser.Rectangle.intersects(a.hullY,b)===!1?!1:(this._overlap=0,this._maxOverlap=a.deltaAbsY()+this.OVERLAP_BIAS,a.deltaY()<0?(this._overlap=b.bottom-a.hullY.y,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.up===!1||b.tile.collideDown===!1?this._overlap=0:a.touching.up=!0):(this._overlap=a.hullY.bottom-b.y,b.tile.enableMaxOverlapCheck&&this._overlap>this._maxOverlap||a.allowCollision.down===!1||b.tile.collideUp===!1?this._overlap=0:a.touching.down=!0),0!==this._overlap?(c&&(a.y=a.deltaY()<0?a.y+this._overlap:a.y-this._overlap,a.velocity.y=0===a.bounce.y?0:-a.velocity.y*a.bounce.y,a.updateHulls()),!0):!1)},Phaser.Physics.Arcade.prototype.moveToXY=function(a,b,c,d,e){return"undefined"==typeof d&&(d=60),"undefined"==typeof e&&(e=0),this._angle=Math.atan2(c-a.body.y,b-a.body.x),e>0&&(d=this.distanceToXY(a,b,c)/(e/1e3)),a.body.velocity.x=Math.cos(this._angle)*d,a.body.velocity.y=Math.sin(this._angle)*d,this._angle},Phaser.Physics.Arcade.prototype.distanceToXY=function(a,b,c){return this._dx=a.body.x-b,this._dy=a.body.y-c,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},Phaser.Physics.Arcade.prototype.angleToXY=function(a,b,c){return this._dx=b-a.body.x,this._dy=c-a.body.y,Math.atan2(this._dy,this._dx)},Phaser.Particles.Arcade.Emitter.prototype.emitParticle=function(){var a=this.getFirstExists(!1);if(null!=a){if(this.width>1||this.height>1?a.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):a.reset(this.emitX,this.emitY),a.lifespan=this.lifespan,a.body.bounce.setTo(this.bounce.x,this.bounce.y),a.body.velocity.x=this.minParticleSpeed.x!=this.maxParticleSpeed.x?this.game.rnd.integerInRange(this.minParticleSpeed.x,this.maxParticleSpeed.x):this.minParticleSpeed.x,a.body.velocity.y=this.minParticleSpeed.y!=this.maxParticleSpeed.y?this.game.rnd.integerInRange(this.minParticleSpeed.y,this.maxParticleSpeed.y):this.minParticleSpeed.y,a.body.gravity.y=this.gravity,a.body.angularVelocity=this.minRotation!=this.maxRotation?this.game.rnd.integerInRange(this.minRotation,this.maxRotation):this.minRotation,1!==this.minParticleScale||1!==this.maxParticleScale){var b=this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale);a.scale.setTo(b,b)}this.flipped&&(a.body.velocity.x*=-1,a.body.angularVelocity*=-1,a.scale.x*=-1),a.body.drag.x=this.particleDrag.x,a.body.drag.y=this.particleDrag.y,a.body.angularDrag=this.angularDrag}},Phaser.Physics.Arcade.prototype.separateX=function(a,b){return a.immovable&&b.immovable?!1:(this._overlap=0,Phaser.Rectangle.intersects(a,b)&&(this._maxOverlap=a.deltaAbsX()+b.deltaAbsX()+this.OVERLAP_BIAS,0===a.deltaX()&&0===b.deltaX()?(a.embedded=!0,b.embedded=!0):a.deltaX()>b.deltaX()?(this._overlap=a.x+a.width-b.x,this._overlap>this._maxOverlap||a.allowCollision.right===!1||b.allowCollision.left===!1?this._overlap=0:(a.touching.right=!0,b.touching.left=!0)):a.deltaX()<b.deltaX()&&(this._overlap=a.x-b.width-b.x,-this._overlap>this._maxOverlap||a.allowCollision.left===!1||b.allowCollision.right===!1?this._overlap=0:(a.touching.left=!0,b.touching.right=!0)),0!==this._overlap)?(a.overlapX=this._overlap,b.overlapX=this._overlap,a.customSeparateX||b.customSeparateX?!0:(this._velocity1=a.velocity.x,this._velocity2=b.velocity.x,a.immovable||b.immovable?a.immovable?b.immovable||(b.x+=this._overlap,b.velocity.x=this._velocity1-this._velocity2*b.bounce.x):(a.x=a.x-this._overlap,a.velocity.x=this._velocity2-this._velocity1*a.bounce.x):a.blockable||b.blockable?a.blockable?(a.x=a.x-this._overlap,a.velocity.x=this._velocity2-this._velocity1*a.bounce.x):b.blockable&&(b.x+=this._overlap,b.velocity.x=this._velocity1-this._velocity2*b.bounce.x):(this._overlap*=.5,a.x=a.x-this._overlap,b.x+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*b.mass/a.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*a.mass/b.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,a.velocity.x=this._average+this._newVelocity1*a.bounce.x,b.velocity.x=this._average+this._newVelocity2*b.bounce.x),a.updateHulls(),b.updateHulls(),!0)):!1)},Phaser.Physics.Arcade.prototype.separateY=function(a,b){return a.immovable&&b.immovable?!1:(this._overlap=0,Phaser.Rectangle.intersects(a,b)&&(this._maxOverlap=a.deltaAbsY()+b.deltaAbsY()+this.OVERLAP_BIAS,0===a.deltaY()&&0===b.deltaY()?(a.embedded=!0,b.embedded=!0):a.deltaY()>b.deltaY()?(this._overlap=a.y+a.height-b.y,this._overlap>this._maxOverlap||a.allowCollision.down===!1||b.allowCollision.up===!1?this._overlap=0:(a.touching.down=!0,b.touching.up=!0)):a.deltaY()<b.deltaY()&&(this._overlap=a.y-b.height-b.y,-this._overlap>this._maxOverlap||a.allowCollision.up===!1||b.allowCollision.down===!1?this._overlap=0:(a.touching.up=!0,b.touching.down=!0)),0!==this._overlap)?(a.overlapY=this._overlap,b.overlapY=this._overlap,a.customSeparateY||b.customSeparateY?!0:(this._velocity1=a.velocity.y,this._velocity2=b.velocity.y,a.immovable||b.immovable?a.immovable?b.immovable||(b.y+=this._overlap,b.velocity.y=this._velocity1-this._velocity2*b.bounce.y,a.sprite.active&&a.moves&&a.deltaY()<b.deltaY()&&(b.x+=a.x-a.lastX)):(a.y=a.y-this._overlap,a.velocity.y=this._velocity2-this._velocity1*a.bounce.y,b.active&&b.moves&&a.deltaY()>b.deltaY()&&(a.x+=b.x-b.lastX)):a.blockable||b.blockable?a.blockable?(a.y=a.y-this._overlap,a.velocity.y=this._velocity2-this._velocity1*a.bounce.y,b.active&&b.moves&&a.deltaY()>b.deltaY()&&(a.x+=b.x-b.lastX)):b.blockable&&(b.y+=this._overlap,b.velocity.y=this._velocity1-this._velocity2*b.bounce.y,a.sprite.active&&a.moves&&a.deltaY()<b.deltaY()&&(b.x+=a.x-a.lastX)):(this._overlap*=.5,a.y=a.y-this._overlap,b.y+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*b.mass/a.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*a.mass/b.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,a.velocity.y=this._average+this._newVelocity1*a.bounce.y,b.velocity.y=this._average+this._newVelocity2*b.bounce.y),a.updateHulls(),b.updateHulls(),!0)):!1)})},{}],6:[function(a,b){b.exports={range:function(){if(!arguments.length)return[];var a,b,c;1==arguments.length?(a=0,b=arguments[0],c=1):(a=arguments[0],b=arguments[1],c=arguments[2]||1);for(var d=[],e=a;b>e;e+=c)d.push(e);return d}}},{}]},{},[4]);